# Соглашения по коду

## Code style

- **Форматирование и стиль:**

  - Используйте [Prettier](https://prettier.io/) для автоформатирования (см. .prettierrc.json)
  - Отступы: 2 пробела, максимальная длина строки: 100 символов
  - Одинарные кавычки для строк, точка с запятой в конце строки
  - Пробелы вокруг операторов и после запятых, пустая строка в конце файла
  - Не игнорируйте Prettier/ESLint — всегда форматируйте и линтьте код перед коммитом

- **TypeScript и типизация:**

  - Всегда используйте строгую типизацию, избегайте any без необходимости
  - Глобальные и переиспользуемые типы выносите в папку `/types` (например, types/user.ts) или отдельные .d.ts файлы (например, auth.d.ts)
  - Не дублируйте типы в каждом компоненте — используйте глобальные
  - Не объявляйте типы прямо в template (as string и др.) — типизация должна быть на уровне скрипта
  - Интерфейсы и типы именуйте с большой буквы (PascalCase)
  - Всегда явно указывайте типы для props и событий компонентов (emits)

- **Vue 3 (SFC):**

  - Используйте Composition API (`<script setup lang="ts">`)
  - Именование компонентов — PascalCase, props — camelCase
  - Стили внутри SFC — scoped, если компонент не глобальный
  - Слоты именуйте явно (`<slot name="...">`)
  - Не используйте v-if и v-for на одном элементе
  - Для реактивных переменных используйте ref/computed
  - Не пишите вычисления и сложную логику прямо в шаблоне — выносите в computed или методы
  - Если компонент или страница становятся слишком большими, выносите логику и секции в отдельные компоненты или файлы для переиспользования и читаемости

- **Pinia:**

  - Сторы именуйте с суффиксом Store (например, useUserStore)
  - Держите бизнес-логику в сторах, а не в компонентах

- **Tailwind CSS:**

  - Классы располагайте по логике: layout → box model → typography → visual → state
  - Не дублируйте кастомные стили, если можно использовать утилиты Tailwind

- **Drizzle ORM:**

  - Схемы и миграции храните отдельно (drizzle/schema.ts, drizzle/000\*.sql)
  - Именование таблиц и полей — snake_case

- **Именование и структура:**
  - Не используйте короткие, неинформативные имена переменных (например, l, c, d) — пишите явно (lesson, course, data)
  - Не оставляйте закомментированный или неиспользуемый код в репозитории
  - Не используйте магические числа и строки — выносите их в константы

## Nuxt-специфичные рекомендации

- Не импортируйте вручную то, что уже автоимпортируется Nuxt (например, useState, useFetch, useRoute, useRouter, definePageMeta и др.)
- Используйте auto-import composables и utils, если они лежат в папках, поддерживаемых Nuxt (composables/, utils/)
- Для страниц используйте только папку pages/ — Nuxt сам создаёт роуты
- Для middleware используйте папку middleware/ и именование с .global.ts для глобальных
- Для layout'ов используйте layouts/ и именование по назначению (default.vue, profile.vue и т.д.)
- Не храните бизнес-логику в pages — выносите её в сторы, composables или utils

## Линтеры/форматтеры

- **Prettier** — автоформатирование кода (настроен через .prettierrc.json)
- **ESLint** — линтинг JS/TS/Vue кода (настроен через eslint.config.mjs)
- **Stylelint** (опционально) — для проверки CSS/SCSS

## Соглашения по коммитам и веткам

- **Коммиты:**

  - Используйте [Conventional Commits](https://www.conventionalcommits.org/ru/v1.0.0/)
  - Примеры: `feat: добавить страницу профиля`, `fix: исправить баг с авторизацией`, `refactor: вынести логику в store`
  - Сообщение должно быть на русском или английском, но понятно команде

- **Ветки:**
  - Основная ветка: `main`
  - Для новых фич: `feature/имя-фичи`
  - Для багфиксов: `fix/описание-багфикса`
  - Для рефакторинга: `refactor/описание`

## Частые ошибки, которых нужно избегать

- Добавление ненужных импортов (особенно автоимпортируемого Nuxt или неиспользуемого)
- Дублирование или локальное объявление типов, которые можно вынести глобально
- Объявление типов прямо в template (as string и др.)
- Короткие, неинформативные имена переменных
- Избыточное преобразование данных без необходимости
- Логика и вычисления в template вместо computed/методов
- Смешивание бизнес-логики и UI (бизнес-логика должна быть в сторах, utils, composables)
- Разрастание компонентов/страниц без декомпозиции
- Неиспользуемый или закомментированный код в репозитории
- Нарушение code style (игнорирование Prettier/ESLint)
- Жёстко захардкоженные значения (магические числа/строки)
- Отсутствие явной типизации props и emits

---

Если заметили повторяющуюся ошибку — добавьте её в этот список для всей команды!

Если потребуется добавить или изменить правила — обновите этот файл и .prettierrc.json / eslint.config.mjs.
